% Matthew Blunt
% openMHA Test dB Lookup Table Error Statistics Calculator
% 08/19/2020

%------------------------------------------------------------------------%
% The following script reads from an error plot auto-generated by the
% Programmable Lookup Table Block found in the FPGA Open Speech Tools
% Library. Interpolated dB Lookup Table data is compared with Ideal dB
% Calculated Data, and various statistics are output. To execute this
% script properly, click on the generated 'Output Values over Input Range'
% plot, which is generated when the 'Show Error Calculation' box is checked
% in the Programmable Lookup Table - Block Parameters menu
%------------------------------------------------------------------------%

clear all;

% Import data from plot to workspace
a = get(gca,'Children');
xdata = get(a, 'XData');
ydata = get(a,'YData');

% Assign data to variables
interpolated = ydata{3,1};
ideal = ydata{2,1};
inputs = xdata{2,1};
table_inputs = xdata{1,1}

% Find minimum input value
table_inputs(1)

% Calculate absolute differences and corresponding max
diff = abs(ideal-interpolated);
[maxdiff diffidx] = max(diff);
disp(maxdiff);
maxinput = inputs(diffidx)
